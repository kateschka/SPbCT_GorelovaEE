смотреть lab22.cpp, остальное валидно только для linux
